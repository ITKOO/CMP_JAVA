package signup;

import java.awt.Color;
import java.awt.Cursor;
import java.awt.Font;
import java.awt.Insets;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.IOException;

import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPasswordField;
import javax.swing.JTextArea;
import javax.swing.border.LineBorder;

import firebase.DB;

public class SignUpGUI extends JFrame
{
	JTextArea inputStudentN;
	JPasswordField inputPassword;
	JTextArea inputName;
	JTextArea inputCode;
	JButton SignUpBtn;
	public  SignUpGUI(){
		super("로그인");
		
		
		JFrame frame = new JFrame();
		frame.setBounds(0, 0, 1024, 768);
		frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		frame.getContentPane().setLayout(null);
		
		frame.setContentPane(new JLabel(new ImageIcon("signup_bg.jpg")));
	
		
		
		JLabel inputSN=new JLabel("학번");
		inputSN.setBounds(410, 295, 70, 20);
		inputSN.setForeground(Color.WHITE);
		inputSN.setFont(new Font("맑은 고딕", Font.BOLD, 13));
		frame.getContentPane().add(inputSN);
		inputStudentN=new JTextArea("",1,20);
		 inputStudentN.setOpaque(false);
		 inputStudentN.setBorder(new LineBorder(Color.white, 1));
		 inputStudentN.setForeground(Color.white);
		 inputStudentN.setBounds(470, 295, 150, 20);
		frame.getContentPane().add(inputStudentN);
		
		
		JLabel  inputP=new JLabel("비밀번호");
		inputP.setBounds(400, 330, 70, 20);
		inputP.setForeground(Color.WHITE);
		inputP.setFont(new Font("맑은 고딕", Font.BOLD, 13));
		frame.getContentPane().add(inputP);
		 inputPassword=new JPasswordField();
		 inputPassword.setOpaque(false);
		inputPassword.setBorder(new LineBorder(Color.white, 1));
		inputPassword.setForeground(Color.white);
		inputPassword.setBounds(470, 330, 150, 20);
		frame.getContentPane().add(inputPassword);
		
		JLabel inputN=new JLabel("이름");
		inputN.setBounds(410, 365, 70, 20);
		inputN.setForeground(Color.WHITE);
		inputN.setFont(new Font("맑은 고딕", Font.BOLD, 13));
		frame.getContentPane().add(inputN);
		inputName=new JTextArea("",1,20);
		inputName.setOpaque(false);
		inputName.setBorder(new LineBorder(Color.white, 1));
		inputName.setForeground(Color.white);
		inputName.setBounds(470, 365, 150, 20);
		frame.getContentPane().add(inputName);
		
		JLabel inputC=new JLabel("인증코드");
		inputC.setBounds(400, 400, 70, 20);
		inputC.setForeground(Color.WHITE);
		inputC.setFont(new Font("맑은 고딕", Font.BOLD, 13));
		frame.getContentPane().add(inputC);
		inputCode=new JTextArea("",1,20);
		inputCode.setOpaque(false);
		inputCode.setBorder(new LineBorder(Color.white, 1));
		inputCode.setForeground(Color.white);
		inputCode.setBounds(470, 400, 150, 20);
		frame.getContentPane().add(inputCode);
		
		SignUpBtn = new JButton(new ImageIcon("signup.png"));
		SignUpBtn.setBounds(460, 440, 120, 25);
		SignUpBtn.setOpaque(false);
		SignUpBtn.setBorderPainted(false);
		SignUpBtn.setContentAreaFilled(false);
		SignUpBtn.setFocusPainted(false);
		SignUpBtn.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));
		frame.getContentPane().add(SignUpBtn);
		
		SignUpBtn.addMouseListener(new java.awt.event.MouseAdapter() 
		{ //첨부 버튼을 누른 경우
            public void mouseClicked(java.awt.event.MouseEvent evt) 
            {
					SignUpMouseClicked(evt);
				
            }
        });
		
		frame.setVisible(true);
		
	}              
	 private void SignUpMouseClicked(java.awt.event.MouseEvent evt) 
	 {
		 SignUp s;
		 DB db;
		  try
		  {
			  
			  if (inputStudentN.getText().equals("")||inputPassword.getText().equals("") ||
					  inputName.getText().equals("")||inputCode.getText().equals("") )
			  {
				  JOptionPane.showMessageDialog(null, "모든 항목을 입력해주세요");
			  }
			  
		    else
		    {
			      s = new SignUp();
			     db= new DB();
			     
				  String sStudentN=inputStudentN.getText().toString();
				  String sPassword=inputPassword.getText().toString();
				  String sName=inputName.getText().toString();
				  String scode=inputCode.getText().toString();
				  
				  db.connectDB();
				  s. saveSignUpData(sStudentN, sPassword, sName, scode);
				  
				  System.out.println("학번:"+sStudentN); //학번
				  System.out.println("비밀번호:"+sPassword); //비밀번호
				  System.out.println("이름:"+sName); //이름
				  System.out.println("인증코드:"+scode); //인증코드
				  
				  JOptionPane.showMessageDialog(null, "회원가입 성공");
				  System.exit(0); //회원가입을 성공하면 창닫기
		  }
			  
		  }
		  
		  catch(Exception n)
		  {
			  System.out.println("오류");
			  System.out.println(n.toString());
		  }
	  } // end of SignUpMouseClicked
	 
	public static void main(String[] args) 
	{
		new  SignUpGUI();
		
	} // end of main
} // end of SignUpGUI
