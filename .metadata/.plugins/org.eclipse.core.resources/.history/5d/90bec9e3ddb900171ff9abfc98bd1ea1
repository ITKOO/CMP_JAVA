package firebase;

import java.io.FileInputStream;

import com.google.firebase.FirebaseApp;
import com.google.firebase.FirebaseOptions;
import com.google.firebase.auth.FirebaseCredentials;
import com.google.firebase.database.DataSnapshot;
import com.google.firebase.database.DatabaseError;
import com.google.firebase.database.DatabaseReference;
import com.google.firebase.database.FirebaseDatabase;
import com.google.firebase.database.ValueEventListener;


public class PostData implements ValueEventListener
{
	public static class Post 
	{

	    public int age;
	    public String name;

	    public Post(int age, String name) 
	    {
	        this.age = age;
	        this.name = name;
	    } // end of constructor

	} // end of Post
	
	

	public static void main(String[] args)
	{
		try
		{
			FileInputStream serviceAccount = new FileInputStream("CMP-JAVA-PROJECT-d5d296baddd2.json");
			
			FirebaseOptions options = new FirebaseOptions.Builder()
			.setCredential(FirebaseCredentials.fromCertificate(serviceAccount))
			.setDatabaseUrl("https://cmp-java-project.firebaseio.com/")
			.build();

			FirebaseApp.initializeApp(options);
		}
		
		catch(Exception e)
		{
			e.printStackTrace();
		}
		
		// Get a reference to our posts
		final FirebaseDatabase database = FirebaseDatabase.getInstance();
		DatabaseReference ref = database.getReference("cmp/pratice");

		// Attach a listener to read the data at our posts reference
		ref.addValueEventListener(new ValueEventListener() 
		{
			@Override
			 public void onDataChange(DataSnapshot dataSnapshot) 
			{
				 System.out.println("hey");
				 Post post = dataSnapshot.getValue(Post.class);
				 System.out.println(post);
			 }
			@Override
			public void onCancelled(DatabaseError databaseError) 
			{
				System.out.println("The read failed: " + databaseError.getCode());
			}
		});

	} // end of main
} // end of PostData
