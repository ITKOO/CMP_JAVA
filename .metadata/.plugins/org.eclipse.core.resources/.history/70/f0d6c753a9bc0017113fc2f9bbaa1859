package login;

import javax.swing.JOptionPane;

import com.google.firebase.database.DataSnapshot;
import com.google.firebase.database.DatabaseError;
import com.google.firebase.database.DatabaseReference;
import com.google.firebase.database.FirebaseDatabase;
import com.google.firebase.database.ValueEventListener;

import model.MagicPassUser;
import model.User;

public class Login 
{
	User user;
	
	
	public void getLogin(String studentNumber)
	{
		final FirebaseDatabase database = FirebaseDatabase.getInstance();
		DatabaseReference ref = database.getReference("CMP/User/" +  studentNumber + "/Info");
		
		ref.addValueEventListener(new ValueEventListener() 
		{	 
		    public void onDataChange(DataSnapshot dataSnapshot) 
		    {
		    	user = dataSnapshot.getValue(User.class);
		        System.out.println("제발요" + user);        
		        
		        if(user == null)
		        {
		        	 JOptionPane.showMessageDialog(null, "학번 또는 비밀번호가 올바르지 않습니다.");
		        }
		        
		        else
		        {
		        	  System.out.println(user.studentNumber);
				      System.out.println(user.password);
				      System.out.println(user.name);
				      System.out.println(user.pinCode);
		        }
	       
		    } // end of onDataChange

		    public void onCancelled(DatabaseError databaseError) 
		    {
		        System.out.println("The read failed: " + databaseError.getCode());
		    }
		});
		
		try 
		{
			Thread.sleep(20000);
		} 
		catch (InterruptedException e) 
		{
			e.printStackTrace();
		}
	} // end of getLogin
	
	public void checkLogin()
	{
		
	} // end of checkLogin

} // end of Login
